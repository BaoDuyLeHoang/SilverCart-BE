#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "🔍 Running pre-push checks..."

# Kiểm tra nếu không có thay đổi
if git diff --quiet HEAD; then
    echo "Không có thay đổi. Bỏ qua build."
else
    echo "Có thay đổi. Tiến hành build..."
    dotnet build
fi

# # Run tests
# echo "🧪 Running tests..."
# dotnet test
# if [ $? -ne 0 ]; then
#     echo "❌ Tests failed. Please fix test failures before pushing."
#     exit 1
# fi

# Check code formatting
# echo "🎨 Checking code formatting..."
# dotnet format --verify-no-changes
# if [ $? -ne 0 ]; then
#     echo "❌ Code formatting check failed. Please run 'dotnet format' to fix formatting issues."
#     exit 1
# fi

echo "✅ All pre-push checks passed! Ready to push." 